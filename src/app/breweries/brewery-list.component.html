<!-- Content -->
<div class="container">
  <br/>
  <div class="row">
    
    <!-- Filters -->
    <div class="col-xs-12 col-sm-3">
      <button class="btn btn-default" routerLink="/breweries">Reset</button>
      <button class="btn btn-default" (click)="foobar()">Test</button>

      <single-select key="organic" label="Organic" [options]="store.cached | organic" [facets]="store.refined | organic"></single-select>
      <single-select key="year" label="Years" [options]="store.cached | year" [facets]="store.refined | year"></single-select>
      <single-select key="after" label="After" [options]="store.cached | after" [facets]="store.refined | after"></single-select>
      <single-select key="before" label="Before" [options]="store.cached | before" [facets]="store.refined | before"></single-select>
      <multi-select key="creation" label="Creation" [options]="store.cached | creation" [facets]="store.refined | creation" max="1"></multi-select>
      <single-select key="letter" label="Letters" [options]="store.cached | letter" [facets]="store.refined | letter"></single-select>
      <multi-select key="length" label="Lengths" [options]="store.cached | length" [facets]="store.refined | length"></multi-select>
      <range-select label="Range" [after]="{key:'start'}" [before]="{key:'end'}" [params]="store.params"></range-select>

      <reactive-select
        key="organic" label="Reactive" 
        [mapper]="mapper.organics" 
        loadedEvent="breweriesLoaded" 
        refinedEvent="breweriesChanged">
      </reactive-select>

    </div>

    <!-- Results -->
    <div class="col-xs-12 col-sm-9">
      <!-- List -->
      <!-- <div style="border: 1px lightgray solid">
        <brewery-card 
          *ngFor="let item of breweries" 
          [brewery]="item" 
          (selected)="select(item);dialog.open();">
        </brewery-card>
      </div> -->

      <!-- Cards (attempt1) -->
      <!-- <app-cards [items]="breweries">
        <template let-item="item">
          <brewery-card [brewery]="item" (selected)="select(item);dialog.open();"></brewery-card>
        </template>
      </app-cards> -->

      <!-- Cards (attempt2) -->
      <mason-wall>
        <mason-brick *ngFor="let item of this.store.refined">
          <brewery-card 
            [brewery]="item" 
            (selected)="select(item);dialog.open();">
          </brewery-card>
        </mason-brick>
      </mason-wall>
    </div>
  </div>

</div>

<!-- Modal -->
<modal #dialog size="large" class="dialog">
  <div data-section="header" *ngIf="selection">
    <span class="title">
        <span class="fa fa-1x fa-beer" aria-hidden="true"></span> {{selection.name}}
    </span>
  </div>
  <div data-section="body" *ngIf="selection">
    <div class="row">
      <div class="col-sm-12">
        <em>{{selection.description}}</em>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-6">
        <img *ngIf="selection.images" class="img-responsive center-block" src="{{selection.images.medium}}" />
        <img *ngIf="!selection.images" class="img-responsive center-block" src="./assets/img/brewery-generic.png" />
      </div>
      <div class="col-sm-3"></div>
    </div>
  </div>
  <div data-section="footer" *ngIf="selection">
    <button type="button" class="btn btn-primary" (click)="dialog.close()">Ok</button>
  </div>
</modal>